import { withoutTrailingSlash } from "ufo";
import { computed, useState, useRoute } from "#imports";
export const useContentState = () => {
  const pages = useState("dd-pages", () => ({}));
  const surrounds = useState("dd-surrounds", () => ({}));
  const navigation = useState("dd-navigation");
  const globals = useState("dd-globals", () => ({}));
  return {
    pages,
    surrounds,
    navigation,
    globals
  };
};
export const useContent = () => {
  const { navigation, pages, surrounds, globals } = useContentState();
  const _path = computed(() => withoutTrailingSlash(useRoute().path));
  const page = computed(
    () => {
      return pages.value[_path.value];
    }
  );
  const surround = computed(
    () => {
      return surrounds.value[_path.value];
    }
  );
  const toc = computed(() => page?.value?.body?.toc);
  const type = computed(() => page.value?.meta?.type);
  const excerpt = computed(() => page.value?.excerpt);
  const layout = computed(() => page.value?.meta?.layout);
  const next = computed(() => surround.value?.[1]);
  const prev = computed(() => surround.value?.[0]);
  return {
    globals,
    navigation,
    surround,
    page,
    excerpt,
    toc,
    type,
    layout,
    next,
    prev
  };
};
